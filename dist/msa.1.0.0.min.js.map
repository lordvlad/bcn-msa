{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","../src/index.sjs","node_modules/biojs-util-colorschemes/index.js","node_modules/biojs-util-colorschemes/src/buried.js","node_modules/biojs-util-colorschemes/src/cinema.js","node_modules/biojs-util-colorschemes/src/clustal.js","node_modules/biojs-util-colorschemes/src/clustal2.js","node_modules/biojs-util-colorschemes/src/helix.js","node_modules/biojs-util-colorschemes/src/hydrophobicity.js","node_modules/biojs-util-colorschemes/src/index.js","node_modules/biojs-util-colorschemes/src/lesk.js","node_modules/biojs-util-colorschemes/src/mae.js","node_modules/biojs-util-colorschemes/src/nucleotide.js","node_modules/biojs-util-colorschemes/src/purine.js","node_modules/biojs-util-colorschemes/src/selector.js","node_modules/biojs-util-colorschemes/src/strand.js","node_modules/biojs-util-colorschemes/src/taylor.js","node_modules/biojs-util-colorschemes/src/turn.js","node_modules/biojs-util-colorschemes/src/zappo.js","node_modules/extend/index.js","src/MSASource.js","src/request.js"],"names":[],"mappings":"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A,EAAA,QACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,QACA,EAAA,OACA,EAAA,QACA,EAAA,QACA,EAAA,UACA,EAAA,QACA,EAAA,QACA,EAAA,OACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,EAAA,UACA,EAAA,OACA,IAAA,uGC3BA,EAAA,SACA,EAAA,SACA,EAAA,OACA,EAAA,QACA,EAAA,MACA,EAAA,MACA,EAAA,OACA,EAAA,SACA,EAAA,MACA,EAAA,QACA,EAAA,OACA,EAAA,MACA,EAAA,QACA,EAAA,QACA,EAAA,OACA,EAAA,OACA,EAAA,SACA,EAAA,OACA,EAAA,MACA,EAAA,SACA,EAAA,SACA,EAAA,OACA,EAAA,QACA,EAAA,OACA,EAAA,OACA,EAAA,OACA,EAAA,OACA,IAAA,wGC3BA,EAAA,SACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,EAAA,OACA,EAAA,qGCvBA,EAAA,SACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,iHCvBA,EAAA,SACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,UACA,EAAA,OACA,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","file":"msa.1.0.0.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var request = require('./request')\n, MSA = require('./MSASource')\n, extend = require('extend')\n, colorSchemeSelector = require('biojs-util-colorschemes').selector\n;\n\n/**\n * Helpers\n */\n\nvar floor = Math.floor.bind(Math);\nvar ceil = Math.ceil.bind(Math);\n\nfunction minmaxval(mi, ma, val) {\n    if (val < mi) return mi;\n    if (val > ma) return ma;\n    return val;\n}\n\nfunction slice(arr, a, b) {\n    return Array.prototype.slice.call(arr, a, b);\n}\n\nfunction $(q, r) {\n    return (r||document).querySelector(q);\n}\n\nfunction $$(q, r) {\n    if (q.constructor.name !== 'NodeList')\n        q = (r||document).querySelectorAll(q);\n\n    return slice(q);\n}\n\n/**\n * MultiSequenceAlignment Viewer class\n */\n\n\nclass MSAView  {\n\n    /**\n     * Create MutliSequenceAlignment Viewer\n     * Options include\n     *     font: {string} like '12px monospace'\n     *     lineHeight: {int}\n     *     labelWidth: {int}\n     *     leftMargin: {int}\n     *     letterSpacing: {int}\n     *     cursorColor: {string} like 'rgba(128, 128, 128, 0.2)'\n     *     loadingText: {string}\n     *\n     * @constructor\n     * @param {DOMNode} root\n     * @param {object}  options\n     */\n\n    constructor (root, options) {\n\n        window.a = this;\n\n        var canvas;\n\n        // include default options and options from DOM dataset\n        options = extend({}, MSAView.defaultOptions, root.dataset, options);\n\n        // create canvas if not present\n        if (!(canvas = $('canvas', root)))\n            root.appendChild(canvas = document.createElement('canvas'));\n\n        if ('bcnMsaFullscreen' in options)\n            root.style.width = root.style.height = '100%';\n\n        // set canvas proportions and hide cursor\n        canvas.width = root.offsetWidth;\n        canvas.height = root.offsetHeight;\n        // canvas.style.cursor = 'none';\n\n        // convenience method\n        canvas.on = (event, callback) => {\n            return canvas.addEventListener(event, callback.bind(this));\n        };\n\n        // attach event handlers\n        canvas.on('mousewheel', this.onScroll);\n        canvas.on('wheel', this.onScroll);\n        canvas.on('mousemove', this.onPointerMove);\n        canvas.on('mouseout', this.onPointerOut);\n        canvas.on('mousedown', this.onPointerDown);\n        canvas.on('mouseup', this.onPointerUp);\n        canvas.on('contextmenu', e => e.preventDefault() );\n\n        this.alignment = new MSA(root.dataset.alignment);\n        this.scrollPos = {x: 0, y: 0, maxX: 0, maxY: 0};\n        this.ctx = canvas.getContext('2d');\n        this.ctx.font = options.font;\n        this.draw = this.draw.bind(this);\n        this.render = this.draw.bind(this);\n        this.colorScheme = colorSchemeSelector.getColor(options.colorScheme);\n        this.options = options;\n        this.canvas = canvas;\n        this.mousePos = null;\n        this.LOCK = false;\n        this.view = null;\n        this.updateView();\n\n        requestAnimationFrame(this.draw);\n    }\n\n    updateView () {\n\n        if (this.LOCK)\n            return this.LOCK;\n\n        if (!(this.view))\n            return Promise.resolve();\n\n\n        var cvs = this.canvas\n        , aln = this.alignment\n        , opt = this.options\n        , view = this.view\n        , scroll = this.scrollPos\n        , em = view.charWidth + opt.letterSpacing\n        , H = cvs.clientHeight, W = cvs.clientWidth\n        ;\n\n        return (this.LOCK = Promise.all([\n            aln.getLines(view.offsetY, view.offsetY + view.height)\n            , aln.getSize()\n        ]).then(function (res) {\n\n            view.tracks = res[0];\n            view.alignment = res[1].alignment;\n            view.count = res[1].sequenceCount;\n            view.sequenceWidth = res[1].sequenceWidth;\n\n            scroll.maxX = floor(view.sequenceWidth * em)\n                - W + opt.labelWidth + opt.leftMargin;\n            scroll.maxY = (res[1].sequenceCount - view.height)\n                * opt.lineHeight - H;\n\n            view.lastOffsetY = view.offsetY;\n            this.LOCK = false;\n        }.bind(this)));\n    }\n\n    onScroll (e) {\n        if (this.LOCK)\n            return;\n\n        var s = this.scrollPos\n        , dx = e.deltaX || -e.wheelDeltaX\n        , dy = e.deltaY || -e.wheelDeltaY\n        ;\n\n        s.x = floor(minmaxval(0, s.maxX, s.x + dx));\n        s.y = floor(minmaxval(0, s.maxY, s.y + dy));\n    }\n\n    onPointerOut () {\n        this.mousePos = null;\n    }\n\n    onPointerMove (e) {\n        var r = this.canvas.getBoundingClientRect()\n        , m = this.mousePos || {}\n        ;\n\n        this.mousePos = {\n            left: m.left\n            , right: m.right\n            , middle: m.middle\n            , y: e.clientY - r.top\n            , x: e.clientX - r.left\n        };\n    }\n\n    onPointerDown (e) {\n        var m = this.mousePos;\n\n        if (!m) return;\n\n        switch (e.which) {\n            case 1: m.left = true; break;\n            case 3: m.right = true; break;\n            case 2: m.middle = true; break;\n        }\n\n        if (m.middle)\n            this.scrollPos.pan = {x: m.x, y: m.y};\n\n        if (m.left)\n            this.view.mark = {sx: m.sx, sy: m.sy};\n\n    }\n\n    onPointerUp (e) {\n        var m = this.mousePos;\n\n        if (m.middle)\n            this.scrollPos.pan = null;\n\n        switch (e.which) {\n            case 1: m.left = false; break;\n            case 3: m.right = false; break;\n            case 2: m.middle = false; break;\n        }\n\n\n    }\n\n    draw (t) {\n\n        var cvs = this.canvas\n        , ctx = this.ctx\n        , opt = this.options\n        , view = this.view\n        , lock = this.LOCK\n        , mouse = this.mousePos\n        , scroll = this.scrollPos\n        , col = this.colorScheme\n        , em = view && (view.charWidth + opt.letterSpacing)\n        , charWidth = view && view.charWidth\n        , H = cvs.clientHeight, W = cvs.clientWidth\n        , lineHeight = opt.lineHeight\n        , letterSpacing = opt.letterSpacing\n        , labelWidth = opt.labelWidth\n        , leftMargin = opt.leftMargin\n        ;\n\n        if (!view) {\n            view = this.view = {tracks: []};\n            charWidth = view.charWidth = ceil(ctx.measureText('x').width);\n            em = view.charWidth + letterSpacing;\n            view.height = floor(H / lineHeight) - 4;\n            view.seqOffset = labelWidth + letterSpacing + leftMargin;\n            view.labelTruncate = floor((labelWidth - leftMargin) / charWidth);\n        }\n\n        // check mouse middle button scroll\n        if (mouse && mouse.middle) {\n            let dx = (mouse.x - scroll.pan.x) / 10\n            , dy = (mouse.y - scroll.pan.y) / 10\n            ;\n\n            scroll.x = floor(minmaxval(0, scroll.maxX, scroll.x + dx));\n            scroll.y = floor(minmaxval(0, scroll.maxY, scroll.y + dy));\n        }\n\n\n        view.offsetX = floor(scroll.x / em);\n        view.offsetY = floor(scroll.y / lineHeight);\n\n        // get mouse coordinates relative to sequence and\n        // aminoacid position\n        if (mouse) {\n            mouse.sx = floor((mouse.x - view.seqOffset) / em) + view.offsetX;\n            mouse.sy = floor(mouse.y / lineHeight) - 2 + view.offsetY;\n        }\n\n        // maybe we need to fetch new lines from the underlying source\n        if (!lock && (view.offsetY !== view.lastOffsetY))\n            this.updateView();\n\n        // clear canvas\n        ctx.clearRect(0, 0, W, H);\n\n        // loading text\n        if (lock)\n            ctx.fillText(opt.loadingText, leftMargin, lineHeight);\n\n\n        // ruler\n        {\n            let y = lineHeight * 2, x = view.seqOffset, i = view.offsetX + 1;\n            while (x < W) {\n                if (i % 10 === 0 || i === 1)\n                    ctx.fillText(i+'', x, y);\n                else if (i % 5 === 0)\n                    ctx.fillText('.', x, y);\n\n                i += 1;\n                x += em;\n            }\n        }\n\n\n        // tracks\n        if (view && view.tracks) {\n            let bgW = em + 2, bgH = lineHeight + 2\n            , bgX = -em/4, bgY = -lineHeight * 4/5\n            , m = mouse\n            ;\n\n            view.tracks.forEach(function (t, i) {\n\n                let y = (i + 3) * lineHeight, x = view.seqOffset\n                , j = view.offsetX, s =  t.sequence, l = t.label\n                ;\n\n                // sequence\n                while (x < W) {\n                    let a = s[j];\n                    if ((aa = s[j]) !== '-' && col[aa]) {\n                        ctx.beginPath();\n                        ctx.fillStyle = col[aa];\n                        ctx.strokeStyle = col[aa];\n                        ctx.rect(x + bgX, y + bgY, em, lineHeight);\n                        ctx.fill(); ctx.stroke();\n                        ctx.closePath();\n                        ctx.fillStyle = 'black';\n                    }\n                    ctx.fillText(aa, x, y);\n\n                    j += 1;\n                    x += em;\n                }\n\n                // label\n                if (m && (mouse.sx < view.offsetX) && mouse.sy === view.offsetY + i) {\n                    ctx.save();\n                    ctx.fillStyle = 'rgb(255, 255, 255)';\n                    ctx.fillRect(leftMargin, y - lineHeight + 2\n                                 , W, lineHeight + 4);\n                    ctx.restore();\n                } else {\n                    l = l.substr(0, view.labelTruncate) + '...';\n                }\n\n                ctx.fillText(l, leftMargin, y);\n            });\n        }\n\n        if (mouse) {\n            let r = mouse.left || mouse.right || mouse.middle ? 6 : 4;\n\n            // info line\n            if (view.tracks && view.tracks[mouse.sy]) {\n                let seq = view.tracks[mouse.sy]\n                , pos = seq.sequence[mouse.sx];\n\n                if (pos && pos !== '-') {\n                    pos += seq.sequence.substr(0, mouse.sx).replace(/-/g,'').length+1;\n                    ctx.fillText(pos, view.seqOffset, lineHeight);\n                }\n                ctx.fillText(seq.label, view.seqOffset + 6 * charWidth, lineHeight);\n            }\n\n            // ctx.save();\n            // ctx.fillStyle = opt.cursorColor;\n\n            // // if middle button is pressed\n            // if (mouse.middle) {\n\n            //     // draw 3 circles between the point where\n            //     // the mouse button has first been pressed\n            //     // and the current coordinates;\n            //     let x = scroll.pan.x, y = scroll.pan.y, i = 4\n            //     , dx = (x-mouse.x) / i, dy = (y-mouse.y) / i\n            //     ;\n\n            //     fillCircle(x, y, r * 3, ctx);\n\n            //     while (--i)\n            //         fillCircle(x - dx*i, y - dy*i, i * r/2, ctx);\n            // } else {\n            //     fillCircle(mouse.x, mouse.y, r * 3, ctx);\n            // }\n\n            // // draw small inner circle\n            // fillCircle(mouse.x, mouse.y, r * 2, ctx);\n\n            // ctx.restore();\n        }\n\n\n        requestAnimationFrame(this.draw);\n    }\n\n}\n\nfunction fillCircle(x, y, r, ctx) {\n\n    ctx.beginPath();\n    ctx.arc(x, y, r, 0, Math.PI*2);\n    ctx.fill();\n    ctx.closePath();\n}\n\nMSAView.create = function (options, domNode) {\n    return new MSAView(domNode, options);\n};\n\nMSAView.defaultOptions = {\n    font: '12px monospace'\n    , lineHeight: 14     // px\n    , labelWidth: 100    // px\n    , leftMargin: 20     // px\n    , letterSpacing: 8   // px between aminoacids\n    , cursorColor: 'rgba(128, 128, 128, 0.2)'\n    , loadingText: 'loading...'\n    , colorScheme: 'clustal2'\n};\n\n\n$$('[data-bcn=\"msa\"]').map(MSAView.create.bind(null, null));\n","module.exports = require('./src/index.js')\n","module.exports = {\n  A: \"#00a35c\",\n  R: \"#00fc03\",\n  N: \"#00eb14\",\n  D: \"#00eb14\",\n  C: \"#0000ff\",\n  Q: \"#00f10e\",\n  E: \"#00f10e\",\n  G: \"#009d62\",\n  H: \"#00d52a\",\n  I: \"#0054ab\",\n  L: \"#007b84\",\n  K: \"#00ff00\",\n  M: \"#009768\",\n  F: \"#008778\",\n  P: \"#00e01f\",\n  S: \"#00d52a\",\n  T: \"#00db24\",\n  W: \"#00a857\",\n  Y: \"#00e619\",\n  V: \"#005fa0\",\n  B: \"#00eb14\",\n  X: \"#00b649\",\n  Z: \"#00f10e\"\n};\n","module.exports = {\n  A: \"#BBBBBB\",\n  B: \"grey\",\n  C: \"yellow\",\n  D: \"red\",\n  E: \"red\",\n  F: \"magenta\",\n  G: \"brown\",\n  H: \"#00FFFF\",\n  I: \"#BBBBBB\",\n  J: \"#fff\",\n  K: \"#00FFFF\",\n  L: \"#BBBBBB\",\n  M: \"#BBBBBB\",\n  N: \"green\",\n  O: \"#fff\",\n  P: \"brown\",\n  Q: \"green\",\n  R: \"#00FFFF\",\n  S: \"green\",\n  T: \"green\",\n  U: \"#fff\",\n  V: \"#BBBBBB\",\n  W: \"magenta\",\n  X: \"grey\",\n  Y: \"magenta\",\n  Z: \"grey\",\n  Gap: \"grey\"\n};\n","module.exports = {\n  A: \"orange\",\n  B: \"#fff\",\n  C: \"green\",\n  D: \"red\",\n  E: \"red\",\n  F: \"blue\",\n  G: \"orange\",\n  H: \"red\",\n  I: \"green\",\n  J: \"#fff\",\n  K: \"red\",\n  L: \"green\",\n  M: \"green\",\n  N: \"#fff\",\n  O: \"#fff\",\n  P: \"orange\",\n  Q: \"#fff\",\n  R: \"red\",\n  S: \"orange\",\n  T: \"orange\",\n  U: \"#fff\",\n  V: \"green\",\n  W: \"blue\",\n  X: \"#fff\",\n  Y: \"blue\",\n  Z: \"#fff\",\n  Gap: \"#fff\"\n};\n","module.exports = {\n  A: \"#80a0f0\",\n  R: \"#f01505\",\n  N: \"#00ff00\",\n  D: \"#c048c0\",\n  C: \"#f08080\",\n  Q: \"#00ff00\",\n  E: \"#c048c0\",\n  G: \"#f09048\",\n  H: \"#15a4a4\",\n  I: \"#80a0f0\",\n  L: \"#80a0f0\",\n  K: \"#f01505\",\n  M: \"#80a0f0\",\n  F: \"#80a0f0\",\n  P: \"#ffff00\",\n  S: \"#00ff00\",\n  T: \"#00ff00\",\n  W: \"#80a0f0\",\n  Y: \"#15a4a4\",\n  V: \"#80a0f0\",\n  B: \"#fff\",\n  X: \"#fff\",\n  Z: \"#fff\"\n};\n","module.exports = {\n  A: \"#e718e7\",\n  R: \"#6f906f\",\n  N: \"#1be41b\",\n  D: \"#778877\",\n  C: \"#23dc23\",\n  Q: \"#926d92\",\n  E: \"#ff00ff\",\n  G: \"#00ff00\",\n  H: \"#758a75\",\n  I: \"#8a758a\",\n  L: \"#ae51ae\",\n  K: \"#a05fa0\",\n  M: \"#ef10ef\",\n  F: \"#986798\",\n  P: \"#00ff00\",\n  S: \"#36c936\",\n  T: \"#47b847\",\n  W: \"#8a758a\",\n  Y: \"#21de21\",\n  V: \"#857a85\",\n  B: \"#49b649\",\n  X: \"#758a75\",\n  Z: \"#c936c9\"\n};\n","module.exports = {\n  A: \"#ad0052\",\n  B: \"#0c00f3\",\n  C: \"#c2003d\",\n  D: \"#0c00f3\",\n  E: \"#0c00f3\",\n  F: \"#cb0034\",\n  G: \"#6a0095\",\n  H: \"#1500ea\",\n  I: \"#ff0000\",\n  J: \"#fff\",\n  K: \"#0000ff\",\n  L: \"#ea0015\",\n  M: \"#b0004f\",\n  N: \"#0c00f3\",\n  O: \"#fff\",\n  P: \"#4600b9\",\n  Q: \"#0c00f3\",\n  R: \"#0000ff\",\n  S: \"#5e00a1\",\n  T: \"#61009e\",\n  U: \"#fff\",\n  V: \"#f60009\",\n  W: \"#5b00a4\",\n  X: \"#680097\",\n  Y: \"#4f00b0\",\n  Z: \"#0c00f3\"\n};\n","module.exports.selector = require(\"./selector\");\n\n// basics\nmodule.exports.taylor = require(\"./taylor\");\nmodule.exports.zappo= require(\"./zappo\");\nmodule.exports.hydro= require(\"./hydrophobicity\");\n\nmodule.exports.clustal = require(\"./clustal\");\nmodule.exports.clustal2 = require(\"./clustal2\");\n\nmodule.exports.curied = require(\"./buried\");\nmodule.exports.cinema = require(\"./cinema\");\nmodule.exports.nucleotide  = require(\"./nucleotide\");\nmodule.exports.helix  = require(\"./helix\");\nmodule.exports.lesk  = require(\"./lesk\");\nmodule.exports.mae = require(\"./mae\");\nmodule.exports.purine = require(\"./purine\");\nmodule.exports.strand = require(\"./strand\");\nmodule.exports.turn = require(\"./turn\");\n","module.exports = {\n  A: \" orange\",\n  B: \" #fff\",\n  C: \" green\",\n  D: \" red\",\n  E: \" red\",\n  F: \" green\",\n  G: \" orange\",\n  H: \" magenta\",\n  I: \" green\",\n  J: \" #fff\",\n  K: \" red\",\n  L: \" green\",\n  M: \" green\",\n  N: \" magenta\",\n  O: \" #fff\",\n  P: \" green\",\n  Q: \" magenta\",\n  R: \" red\",\n  S: \" orange\",\n  T: \" orange\",\n  U: \" #fff\",\n  V: \" green\",\n  W: \" green\",\n  X: \" #fff\",\n  Y: \" green\",\n  Z: \" #fff\",\n  Gap: \" #fff\"\n};\n","module.exports = {\n  A: \" #77dd88\",\n  B: \" #fff\",\n  C: \" #99ee66\",\n  D: \" #55bb33\",\n  E: \" #55bb33\",\n  F: \" #9999ff\",\n  G: \" #77dd88\",\n  H: \" #5555ff\",\n  I: \" #66bbff\",\n  J: \" #fff\",\n  K: \" #ffcc77\",\n  L: \" #66bbff\",\n  M: \" #66bbff\",\n  N: \" #55bb33\",\n  O: \" #fff\",\n  P: \" #eeaaaa\",\n  Q: \" #55bb33\",\n  R: \" #ffcc77\",\n  S: \" #ff4455\",\n  T: \" #ff4455\",\n  U: \" #fff\",\n  V: \" #66bbff\",\n  W: \" #9999ff\",\n  X: \" #fff\",\n  Y: \" #9999ff\",\n  Z: \" #fff\",\n  Gap: \" #fff\"\n};\n","module.exports = {\n  A: \" #64F73F\",\n  C: \" #FFB340\",\n  G: \" #EB413C\",\n  T: \" #3C88EE\",\n  U: \" #3C88EE\"\n};\n","module.exports = {\n  A: \" #FF83FA\",\n  C: \" #40E0D0\",\n  G: \" #FF83FA\",\n  R: \" #FF83FA\",\n  T: \" #40E0D0\",\n  U: \" #40E0D0\",\n  Y: \" #40E0D0\"\n};\n","var Buried = require(\"./buried\");\nvar Cinema = require(\"./cinema\");\nvar Clustal = require(\"./clustal\");\nvar Clustal2 = require(\"./clustal2\");\nvar Helix = require(\"./helix\");\nvar Hydro = require(\"./hydrophobicity\");\nvar Lesk = require(\"./lesk\");\nvar Mae = require(\"./mae\");\nvar Nucleotide = require(\"./nucleotide\");\nvar Purine = require(\"./purine\");\nvar Strand = require(\"./strand\");\nvar Taylor = require(\"./taylor\");\nvar Turn = require(\"./turn\");\nvar Zappo = require(\"./zappo\");\n\nmodule.exports = Colors = {\n  mapping: {\n    buried: Buried,\n    buried_index: Buried,\n    cinema: Cinema,\n    clustal2: Clustal2,\n    clustal: Clustal,\n    helix: Helix,\n    helix_propensity: Helix,\n    hydro: Hydro,\n    lesk: Lesk,\n    mae: Mae,\n    nucleotide: Nucleotide,\n    purine: Purine,\n    purine_pyrimidine: Purine,\n    strand: Strand,\n    strand_propensity: Strand,\n    taylor: Taylor,\n    turn: Turn,\n    turn_propensity: Turn,\n    zappo: Zappo,\n  },\n  getColor: function(scheme) {\n    var color = Colors.mapping[scheme];\n    if (color === undefined) {\n      color = {};\n    }\n    return color;\n  }\n};\n","module.exports = {\n  A: \"#5858a7\",\n  R: \"#6b6b94\",\n  N: \"#64649b\",\n  D: \"#2121de\",\n  C: \"#9d9d62\",\n  Q: \"#8c8c73\",\n  E: \"#0000ff\",\n  G: \"#4949b6\",\n  H: \"#60609f\",\n  I: \"#ecec13\",\n  L: \"#b2b24d\",\n  K: \"#4747b8\",\n  M: \"#82827d\",\n  F: \"#c2c23d\",\n  P: \"#2323dc\",\n  S: \"#4949b6\",\n  T: \"#9d9d62\",\n  W: \"#c0c03f\",\n  Y: \"#d3d32c\",\n  V: \"#ffff00\",\n  B: \"#4343bc\",\n  X: \"#797986\",\n  Z: \"#4747b8\"\n};\n","module.exports = {\n  A: \"#ccff00\",\n  R: \"#0000ff\",\n  N: \"#cc00ff\",\n  D: \"#ff0000\",\n  C: \"#ffff00\",\n  Q: \"#ff00cc\",\n  E: \"#ff0066\",\n  G: \"#ff9900\",\n  H: \"#0066ff\",\n  I: \"#66ff00\",\n  L: \"#33ff00\",\n  K: \"#6600ff\",\n  M: \"#00ff00\",\n  F: \"#00ff66\",\n  P: \"#ffcc00\",\n  S: \"#ff3300\",\n  T: \"#ff6600\",\n  W: \"#00ccff\",\n  Y: \"#00ffcc\",\n  V: \"#99ff00\",\n  B: \"#fff\",\n  X: \"#fff\",\n  Z: \"#fff\"\n};\n","module.exports = {\n  A: \"#2cd3d3\",\n  R: \"#708f8f\",\n  N: \"#ff0000\",\n  D: \"#e81717\",\n  C: \"#a85757\",\n  Q: \"#3fc0c0\",\n  E: \"#778888\",\n  G: \"#ff0000\",\n  H: \"#708f8f\",\n  I: \"#00ffff\",\n  L: \"#1ce3e3\",\n  K: \"#7e8181\",\n  M: \"#1ee1e1\",\n  F: \"#1ee1e1\",\n  P: \"#f60909\",\n  S: \"#e11e1e\",\n  T: \"#738c8c\",\n  W: \"#738c8c\",\n  Y: \"#9d6262\",\n  V: \"#07f8f8\",\n  B: \"#f30c0c\",\n  X: \"#7c8383\",\n  Z: \"#5ba4a4\"\n};\n","module.exports = {\n  A: \"#ffafaf\",\n  R: \"#6464ff\",\n  N: \"#00ff00\",\n  D: \"#ff0000\",\n  C: \"#ffff00\",\n  Q: \"#00ff00\",\n  E: \"#ff0000\",\n  G: \"#ff00ff\",\n  H: \"#6464ff\",\n  I: \"#ffafaf\",\n  L: \"#ffafaf\",\n  K: \"#6464ff\",\n  M: \"#ffafaf\",\n  F: \"#ffc800\",\n  P: \"#ff00ff\",\n  S: \"#00ff00\",\n  T: \"#00ff00\",\n  W: \"#ffc800\",\n  Y: \"#ffc800\",\n  V: \"#ffafaf\",\n  B: \"#fff\",\n  X: \"#fff\",\n  Z: \"#fff\"\n};\n","var hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t'use strict';\n\tif (!obj || toString.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t'use strict';\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","var request = require('./request')\n, extend = require('extend')\n;\n\nfunction min(arr) {\n    return Math.min.apply(Math, arr);\n}\n\nfunction max(arr) {\n    return Math.max.apply(Math, arr);\n}\n\nfunction createLineCache () {\n    var lc = [], idx = [], len = MSA.numCachedLines;\n\n    var to = null;\n    function trim(dir) {\n        var a, b;\n        while ( (a=max(idx)) - (b=min(idx)) > len) {\n            i = dir ? b : a;\n            delete lc[i];\n            idx.splice(idx.indexOf(i), 1);\n        }\n    }\n\n    lc.set = function (i, val) {\n        clearTimeout(to);\n        var dir = i > max(idx) ? 1 : 0;\n        this[i] = val;\n        idx.push(i);\n        if (this.length > len) {\n            to = setTimeout(trim.bind(null, dir), 300);\n        }\n    };\n    Object.defineProperties(lc, {\n        'lastDefinedIndex': {\n            get: function () {return max(idx);}\n        }, 'firstDefinedIndex': {\n            get: function () {return min(idx);}\n        }\n    });\n\n    return lc;\n}\n\n\nfunction MSA(src) {\n    this.src = null;\n    this.href = null;\n    this.sizePromise = null;\n    this.lineCache = createLineCache();\n    this.linePromises = [];\n    this.LOCK = false;\n\n    if (!(/http/.test(src))) {\n        this.src = src;\n    } else {\n        this.href = src;\n    }\n}\n\n\n/** @prop {int} set the number of lines that should be cached at most */\nMSA.numCachedLines = 3000;\n\n/** @prop {int} set the number of lines to fetch eagerly */\nMSA.numPrefetchLines = 1000;\n\n/** @prop {float} fraction at which to trigger prefetch */\nMSA.numPrefetchTrigger = 0.5;\n\n\n/**\n * Fetch and calculate different aspects of the MSA.\n * Returns the promise of an object:\n *   {\n *     {int} size       The bytesize of the whole MSA file\n *     {int} width      The widht of the MSA, i.e. the line length\n *                      of those lines actually containing sequences\n *     {int} offset     The byte offset to the first sequence\n *     {int} count      The number of sequences in the MSA\n *     {int} labelWidth The number of characters reserved for labels\n *                      in front of the sequences\n *   }\n *\n * @return {Promise}\n */\n\nMSA.prototype.getSize = function () {\n\n    var lineCache = this.lineCache;\n\n    // Return the promise if the quers has been\n    // performed before\n    if (this.sizePromise)\n        return this.sizePromise;\n\n\n    // Get the headers for the file to find out the total\n    // file size\n    var headP = request(this.href, {method: 'HEAD'})\n        .then(function (req){\n            return {size: parseInt(req.getResponseHeader('Content-Length'))};\n        });\n\n    // get the first 10 kb to find out the line width, label width\n    // and byte offset to the first sequence\n    var startP = request(this.href, {headers: {range: 'bytes=0-10240'}})\n        .then(function (req) {\n            var i = 0, lineWidth, labelWidth, lines = req.response.split('\\n')\n            , lOffset = 1, offset = lines[0].length + 1, seq;\n\n            // walk down the file, for each 'empty'\n            // line add one to the offset, because of the \\n\n            // removed during the split('\\n')\n            while (!lines[++i].length) {\n                offset++;\n                lOffset++;\n            }\n\n            // i is now the first line with an actual sequence\n            // add one because of the \\n we lost in the split\n            lineWidth = lines[i].length + 1;\n            labelWidth = lines[i].match(/.* +/)[0].length;\n\n            // now push the rest of the lines onto the cache\n            // if they are whole\n            while ((lines[i].length + 1) === lineWidth) {\n                 seq = {\n                    label: lines[i].substr(0, labelWidth)\n                    , sequence: lines[i].substr(labelWidth)\n                };\n                lineCache.set(i-lOffset, seq);\n                i++;\n            }\n\n            return {\n                labelWidth: labelWidth\n                , lineWidth: lineWidth\n                , sequenceWidth: lineWidth - labelWidth\n                , offset: offset\n            };\n        }.bind(this));\n\n    // get last 10kb to get the alignment from the last line\n    var endP = request(this.href, {headers: {range: 'bytes=-10240'}})\n        .then(function (req) {\n            var lines = req.response.split('\\n')\n            , aln = lines.slice(-2)[0]\n            ;\n\n            return {alignment: aln};\n        });\n\n    // and count the number of sequences\n    this.sizePromise = Promise.all([headP, startP, endP])\n        .then(function (props) {\n            // merge everything into one object\n            props = extend({}, props[0], props[1], props[2]);\n\n            // calculate sequence count and width\n            props.sequenceCount = (props.size - props.offset) / props.lineWidth - 2;\n\n            return props;\n        });\n\n    return this.sizePromise;\n};\n\n/**\n * Returns the Promise of a string containing\n * the actual alignment information\n *\n * @return {Promise}\n */\n\nMSA.prototype.getAlignment = function () {\n    return this.getSize().then(function (props) {\n        return props.alignment;\n    });\n};\n\n/**\n * Returns the Promise of an integer containing\n * the sequence count\n *\n * @return {Promise}\n */\n\nMSA.prototype.getCount = function () {\n    return this.getSize().then(function (props) {\n        return props.sequenceCount;\n    });\n};\n\n/**\n * Return the Promise of a single sequence object\n * containing\n * {\n *   {string} label\n *   {string} sequence\n * }\n *\n * @param {int} l line to get, 0-indexed\n * @return {Promise}\n */\n\nMSA.prototype.getLine = function (l) {\n    var x;\n\n    if ((x = this.lineCache[l])) {\n        return Promise.resolve(x);\n    }\n\n    return this.getLines(l, l, true).then(function (lines) {return lines[0];});\n};\n\n/**\n * Return the Promise of an array of sequence objects\n * containing\n * {\n *   {string} label\n *   {string} sequence\n * }\n *\n * @param {int} a              first line to get, 0-indexed\n * @param {int} [b]            last line to get, defaults to a\n * @param {bool} doNotPrefetch flag to supress prefetch\n * @return {Promise}\n */\n\nMSA.prototype.getLines = function (a, b, doNotPrefetch) {\n    b = b || a;\n\n    var lineCache = this.lineCache\n    , linePromises = this.linePromises\n    , href = this.href\n    ;\n\n    return this.getSize().then(function (props) {\n        var labelWidth = props.labelWidth\n        , lineWidth = props.lineWidth\n        , count = props.sequenceCount\n        , offset = props.offset\n        , res = [], fetch = [], wait = []\n        , range, x, i, p, c, d, e, f\n        ;\n\n\n        if (a > count) {\n            return Promise.resolve(null);\n        }\n\n        if (b > count) {\n            b = count;\n        }\n\n        // get lines from Cache if available\n        for (i = a; i <= b; i++) {\n            if ((x = lineCache[i])) {\n                res.push(x);\n            } else if ((x = linePromises[i])) {\n                if (wait.indexOf(x) === -1) {\n                    wait.push(x);\n                }\n            } else {\n                fetch.push(i);\n            }\n        }\n\n        // trigger eager prefetch\n        if (!doNotPrefetch && !this.LOCK) {\n            e = lineCache.lastDefinedIndex - (MSA.numPrefetchLines * MSA.numPrefetchTrigger);\n            f = lineCache.firstDefinedIndex + (MSA.numPrefetchLines * MSA.numPrefetchTrigger);\n\n            if (b > e && lineCache.lastDefinedIndex < count) {\n                // prefetch forward\n                e = lineCache.lastDefinedIndex;\n                f = min([e + MSA.numPrefetchLines, count]);\n            } else if (a < f && lineCache.firstDefinedIndex > 0) {\n                // prefetch backward\n                f = lineCache.firstDefinedIndex;\n                e = max([f - MSA.numPrefetchLines, 0]);\n            } else {\n                e = f = null;\n            }\n\n            if (e) {\n                this.LOCK = true;\n                this.getLines(e, f, true)\n                    .then(function(){\n                        this.LOCK = false;\n                    }.bind(this));\n            }\n        }\n\n        // if we do not need to fetch more lines\n        // from the remote source, return the\n        // results now\n        if (fetch.length === 0 && wait.length === 0) {\n            return Promise.resolve(res);\n        }\n\n        if (fetch.length > 0) {\n            // construct range request\n            c = min(fetch); d = max(fetch);\n\n            range = [\n                offset + c * lineWidth\n                , offset + (d+1) * lineWidth - 2\n            ].join('-');\n\n            p = request(href, {headers: {range: 'bytes=' + range}})\n                .then(function (req) {\n                    // put all the fetches lines onto the linecache\n                    // and push them to the response\n                    req.response.split('\\n').forEach(function (l, i) {\n                        var seq = {\n                            label: l.substr(0, labelWidth)\n                            , sequence: l.substr(labelWidth)\n                        };\n                        lineCache.set(c+i, seq);\n                        delete linePromises[c+i];\n                    });\n                });\n            wait.push(p);\n            for (i=c;i <=d; i++) {\n                linePromises[i] = p;\n            }\n        }\n\n        return Promise.all(wait).then(function() {\n            return lineCache.slice(a, b+1);\n        });\n    }.bind(this));\n};\n\nmodule.exports = MSA;\n","module.exports = function request(url, opt) {\n    opt = opt || {};\n\n    return new Promise(function (resolve, reject) {\n        var req = new XMLHttpRequest();\n\n        req.open(opt.method || 'GET', url, true);\n\n        Object.keys(opt.headers || {}).forEach(function (k) {\n            req.setRequestHeader(k, opt.headers[k]);\n        });\n\n        req.onload = function () {\n            return req.status >= 400 ? reject(req) : resolve(req);\n        };\n\n        req.onerror = function (err) {\n            return reject(err);\n        };\n\n        req.send(opt.data || void 0);\n    });\n};\n"],"sourceRoot":"/source/"}