!function e(s,t,o){function r(i,f){if(!t[i]){if(!s[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(n)return n(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var a=t[i]={exports:{}};s[i][0].call(a.exports,function(e){var t=s[i][1][e];return r(t?t:e)},a,a.exports,e,s,t,o)}return t[i].exports}for(var n="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({"./src/index.sjs":[function(e){function s(e,s,t){return"undefined"!=typeof e&&e>t?e:"undefined"!=typeof s&&t>s?s:t}function t(e,s){window.a=this;var i;s=r({},t.defaultOptions,e.dataset,s),(i=e.querySelector("canvas"))||e.appendChild(i=document.createElement("canvas")),"bcnMsaFullscreen"in s&&(e.style.width=e.style.height="100%"),i.width=e.offsetWidth,i.height=e.offsetHeight,i.on=function(e,s,t){return i.addEventListener(s,t.bind(this))}.bind(this,"undefined"!=typeof arguments?arguments:void 0),i.on("mousewheel",this.onScroll),i.on("wheel",this.onScroll),i.on("mousemove",this.onPointerMove),i.on("mouseout",this.onPointerOut),i.on("mousedown",this.onPointerDown),i.on("mouseup",this.onPointerUp),i.on("contextmenu",function(e,s){return s.preventDefault()}.bind(this,"undefined"!=typeof arguments?arguments:void 0)),this.alignment=new o(e.dataset.alignment),this.scrollPos={x:0,y:0,maxX:0,maxY:0},this.ctx=i.getContext("2d"),this.ctx.font=s.font,this.draw=this.draw.bind(this),this.render=this.draw.bind(this),this.colorScheme=n.getColor(s.colorScheme),this.options=s,this.canvas=i,this.mousePos=null,this.LOCK=!1,this.view=null,this.updateView(),requestAnimationFrame(this.draw)}var o=(e("./request"),e("./MSASource")),r=e("extend"),n=e("biojs-util-colorschemes").selector,i=Math.floor.bind(Math),f=Math.ceil.bind(Math);t.prototype.updateView=function(){if(this.LOCK)return this.LOCK;if(!this.view)return Promise.resolve();var e=this.canvas,s=this.alignment,t=this.options,o=this.view,r=this.scrollPos,n=o.charWidth+t.letterSpacing,f=e.clientHeight,c=e.clientWidth;return this.LOCK=Promise.all([s.getLines(o.offsetY,o.offsetY+o.height),s.getSize()]).then(function(e){o.tracks=e[0],o.alignment=e[1].alignment,o.count=e[1].sequenceCount,o.sequenceWidth=e[1].sequenceWidth,r.maxX=i(o.sequenceWidth*n)-c+t.labelWidth+t.leftMargin,r.maxY=(e[1].sequenceCount-o.height)*t.lineHeight-f,o.lastOffsetY=o.offsetY,this.LOCK=!1}.bind(this))},t.prototype.onScroll=function(e){if(!this.LOCK){var t=this.scrollPos,o=e.deltaX||-e.wheelDeltaX,r=e.deltaY||-e.wheelDeltaY;t.x=i(s(0,t.maxX,t.x+o)),t.y=i(s(0,t.maxY,t.y+r))}},t.prototype.onPointerOut=function(){this.mousePos=null},t.prototype.onPointerMove=function(e){var s=this.canvas.getBoundingClientRect(),t=this.mousePos||{};this.mousePos={left:t.left,right:t.right,middle:t.middle,y:e.clientY-s.top,x:e.clientX-s.left}},t.prototype.onPointerDown=function(e){var s=this.mousePos;if(s){switch(e.which){case 1:s.left=!0;break;case 3:s.right=!0;break;case 2:s.middle=!0}s.middle&&(this.scrollPos.pan={x:s.x,y:s.y}),s.left&&(this.view.mark={sx:s.sx,sy:s.sy})}},t.prototype.onPointerUp=function(e){var s=this.mousePos;switch(s.middle&&(this.scrollPos.pan=null),e.which){case 1:s.left=!1;break;case 3:s.right=!1;break;case 2:s.middle=!1}},t.prototype.draw=function(){var e=this.canvas,t=this.ctx,o=this.options,r=this.view,n=this.LOCK,c=this.mousePos,l=this.scrollPos,a=this.colorScheme,u=r&&r.charWidth+o.letterSpacing,d=r&&r.charWidth,h=e.clientHeight,m=e.clientWidth,p=o.lineHeight,j=o.letterSpacing,b=o.labelWidth,g=o.leftMargin;if(r||(r=this.view={tracks:[]},d=r.charWidth=f(t.measureText("x").width),u=r.charWidth+j,r.height=i(h/p)-4,r.seqOffset=b+j+g,r.labelTruncate=i((b-g)/d)),c&&c.middle){var x=(c.x-l.pan.x)/10,v=(c.y-l.pan.y)/10;l.x=i(s(0,l.maxX,l.x+x)),l.y=i(s(0,l.maxY,l.y+v))}r.offsetX=i(l.x/u),r.offsetY=i(l.y/p),c&&(c.sx=i((c.x-r.seqOffset)/u)+r.offsetX,c.sy=i(c.y/p)-2+r.offsetY),n||r.offsetY===r.lastOffsetY||this.updateView(),t.clearRect(0,0,m,h),n&&t.fillText(o.loadingText,g,p);for(var w=2*p,y=r.seqOffset,P=r.offsetX+1;m>y;)P%10===0||1===P?t.fillText(P+"",y,w):P%5===0&&t.fillText(".",y,w),P+=1,y+=u;if(r&&r.tracks){var _=-u/4,C=4*-p/5,B=c;r.tracks.forEach(function(e,s){for(var o=(s+3)*p,n=r.seqOffset,i=r.offsetX,f=e.sequence,l=e.label;m>n;){{f[i]}"-"!==(aa=f[i])&&a[aa]&&(t.beginPath(),t.fillStyle=a[aa],t.strokeStyle=a[aa],t.rect(n+_,o+C,u,p),t.fill(),t.stroke(),t.closePath(),t.fillStyle="black"),t.fillText(aa,n,o),i+=1,n+=u}B&&c.sx<r.offsetX&&c.sy===r.offsetY+s?(t.save(),t.fillStyle="rgb(255, 255, 255)",t.fillRect(g,o-p+2,m,p+4),t.restore()):l=l.substr(0,r.labelTruncate)+"...",t.fillText(l,g,o)})}if(c){{c.left||c.right||c.middle?6:4}if(r.tracks&&r.tracks[c.sy]){var S=r.tracks[c.sy],F=S.sequence[c.sx];F&&"-"!==F&&(F+=S.sequence.substr(0,c.sx).replace(/-/g,"").length+1,t.fillText(F,r.seqOffset,p)),t.fillText(S.label,r.seqOffset+6*d,p)}}requestAnimationFrame(this.draw)},t.create=function(e,s){return new t(s,e)},t.defaultOptions={font:"12px monospace",lineHeight:14,labelWidth:100,leftMargin:20,letterSpacing:8,cursorColor:"rgba(128, 128, 128, 0.2)",loadingText:"loading...",colorScheme:"clustal2"},"function"==typeof define&&define.amd?define(t):window.MSAView=t},{"./MSASource":"/home/wre/dev/js/msa/src/MSASource.js","./request":"/home/wre/dev/js/msa/src/request.js","biojs-util-colorschemes":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/index.js",extend:"/home/wre/dev/js/msa/node_modules/extend/index.js"}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/index.js":[function(e,s){s.exports=e("./src/index.js")},{"./src/index.js":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/index.js"}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/buried.js":[function(e,s){s.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/cinema.js":[function(e,s){s.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal.js":[function(e,s){s.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal2.js":[function(e,s){s.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/helix.js":[function(e,s){s.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/hydrophobicity.js":[function(e,s){s.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/index.js":[function(e,s){s.exports.selector=e("./selector"),s.exports.taylor=e("./taylor"),s.exports.zappo=e("./zappo"),s.exports.hydro=e("./hydrophobicity"),s.exports.clustal=e("./clustal"),s.exports.clustal2=e("./clustal2"),s.exports.curied=e("./buried"),s.exports.cinema=e("./cinema"),s.exports.nucleotide=e("./nucleotide"),s.exports.helix=e("./helix"),s.exports.lesk=e("./lesk"),s.exports.mae=e("./mae"),s.exports.purine=e("./purine"),s.exports.strand=e("./strand"),s.exports.turn=e("./turn")},{"./buried":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/buried.js","./cinema":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/cinema.js","./clustal":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal.js","./clustal2":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal2.js","./helix":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/helix.js","./hydrophobicity":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/hydrophobicity.js","./lesk":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/lesk.js","./mae":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/mae.js","./nucleotide":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/nucleotide.js","./purine":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/purine.js","./selector":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/selector.js","./strand":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/strand.js","./taylor":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/taylor.js","./turn":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/turn.js","./zappo":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/zappo.js"}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/lesk.js":[function(e,s){s.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/mae.js":[function(e,s){s.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/nucleotide.js":[function(e,s){s.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/purine.js":[function(e,s){s.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/selector.js":[function(e,s){var t=e("./buried"),o=e("./cinema"),r=e("./clustal"),n=e("./clustal2"),i=e("./helix"),f=e("./hydrophobicity"),c=e("./lesk"),l=e("./mae"),a=e("./nucleotide"),u=e("./purine"),d=e("./strand"),h=e("./taylor"),m=e("./turn"),p=e("./zappo");s.exports=Colors={mapping:{buried:t,buried_index:t,cinema:o,clustal2:n,clustal:r,helix:i,helix_propensity:i,hydro:f,lesk:c,mae:l,nucleotide:a,purine:u,purine_pyrimidine:u,strand:d,strand_propensity:d,taylor:h,turn:m,turn_propensity:m,zappo:p},getColor:function(e){var s=Colors.mapping[e];return void 0===s&&(s={}),s}}},{"./buried":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/buried.js","./cinema":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/cinema.js","./clustal":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal.js","./clustal2":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/clustal2.js","./helix":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/helix.js","./hydrophobicity":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/hydrophobicity.js","./lesk":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/lesk.js","./mae":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/mae.js","./nucleotide":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/nucleotide.js","./purine":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/purine.js","./strand":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/strand.js","./taylor":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/taylor.js","./turn":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/turn.js","./zappo":"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/zappo.js"}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/strand.js":[function(e,s){s.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/taylor.js":[function(e,s){s.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/turn.js":[function(e,s){s.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},{}],"/home/wre/dev/js/msa/node_modules/biojs-util-colorschemes/src/zappo.js":[function(e,s){s.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},{}],"/home/wre/dev/js/msa/node_modules/extend/index.js":[function(e,s){var t,o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=function(e){"use strict";if(!e||"[object Object]"!==r.call(e))return!1;var s=o.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!n)return!1;var i;for(i in e);return i===t||o.call(e,i)};s.exports=function i(){"use strict";var e,s,o,r,f,c,l=arguments[0],a=1,u=arguments.length,d=!1;for("boolean"==typeof l?(d=l,l=arguments[1]||{},a=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});u>a;++a)if(e=arguments[a],null!=e)for(s in e)o=l[s],r=e[s],l!==r&&(d&&r&&(n(r)||(f=Array.isArray(r)))?(f?(f=!1,c=o&&Array.isArray(o)?o:[]):c=o&&n(o)?o:{},l[s]=i(d,c,r)):r!==t&&(l[s]=r));return l}},{}],"/home/wre/dev/js/msa/src/MSASource.js":[function(e,s){function t(e){return Math.min.apply(Math,e)}function o(e){return Math.max.apply(Math,e)}function r(){function e(e){for(var n,c;(n=o(r))-(c=t(r))>f;)i=e?c:n,delete s[i],r.splice(r.indexOf(i),1)}var s=[],r=[],f=n.numCachedLines,c=null;return s.set=function(s,t){clearTimeout(c);var n=s>o(r)?1:0;this[s]=t,r.push(s),this.length>f&&(c=setTimeout(e.bind(null,n),300))},Object.defineProperties(s,{lastDefinedIndex:{get:function(){return o(r)}},firstDefinedIndex:{get:function(){return t(r)}}}),s}function n(e){this.src=null,this.href=null,this.sizePromise=null,this.lineCache=r(),this.linePromises=[],this.LOCK=!1,/http/.test(e)?this.href=e:this.src=e}var f=e("./request"),c=e("extend");n.numCachedLines=3e3,n.numPrefetchLines=1e3,n.numPrefetchTrigger=.5,n.prototype.getSize=function(){var e=this.lineCache;if(this.sizePromise)return this.sizePromise;var s=f(this.href,{method:"HEAD"}).then(function(e){return{size:parseInt(e.getResponseHeader("Content-Length"))}}),t=f(this.href,{headers:{range:"bytes=0-10240"}}).then(function(s){for(var t,o,r,n=0,i=s.response.split("\n"),f=1,c=i[0].length+1;!i[++n].length;)c++,f++;for(t=i[n].length+1,o=i[n].match(/.* +/)[0].length;i[n].length+1===t;)r={label:i[n].substr(0,o),sequence:i[n].substr(o)},e.set(n-f,r),n++;return{labelWidth:o,lineWidth:t,sequenceWidth:t-o,offset:c}}.bind(this)),o=f(this.href,{headers:{range:"bytes=-10240"}}).then(function(e){var s=e.response.split("\n"),t=s.slice(-2)[0];return{alignment:t}});return this.sizePromise=Promise.all([s,t,o]).then(function(e){return e=c({},e[0],e[1],e[2]),e.sequenceCount=(e.size-e.offset)/e.lineWidth-2,e}),this.sizePromise},n.prototype.getAlignment=function(){return this.getSize().then(function(e){return e.alignment})},n.prototype.getCount=function(){return this.getSize().then(function(e){return e.sequenceCount})},n.prototype.getLine=function(e){var s;return(s=this.lineCache[e])?Promise.resolve(s):this.getLines(e,e,!0).then(function(e){return e[0]})},n.prototype.getLines=function(e,s,r){s=s||e;var i=this.lineCache,c=this.linePromises,l=this.href;return this.getSize().then(function(a){var u,d,h,m,p,j,b,g,x=a.labelWidth,v=a.lineWidth,w=a.sequenceCount,y=a.offset,P=[],_=[],C=[];if(e>w)return Promise.resolve(null);for(s>w&&(s=w),h=e;s>=h;h++)(d=i[h])?P.push(d):(d=c[h])?-1===C.indexOf(d)&&C.push(d):_.push(h);if(r||this.LOCK||(b=i.lastDefinedIndex-n.numPrefetchLines*n.numPrefetchTrigger,g=i.firstDefinedIndex+n.numPrefetchLines*n.numPrefetchTrigger,s>b&&i.lastDefinedIndex<w?(b=i.lastDefinedIndex,g=t([b+n.numPrefetchLines,w])):g>e&&i.firstDefinedIndex>0?(g=i.firstDefinedIndex,b=o([g-n.numPrefetchLines,0])):b=g=null,b&&(this.LOCK=!0,this.getLines(b,g,!0).then(function(){this.LOCK=!1}.bind(this)))),0===_.length&&0===C.length)return Promise.resolve(P);if(_.length>0)for(p=t(_),j=o(_),u=[y+p*v,y+(j+1)*v-2].join("-"),m=f(l,{headers:{range:"bytes="+u}}).then(function(e){e.response.split("\n").forEach(function(e,s){var t={label:e.substr(0,x),sequence:e.substr(x)};i.set(p+s,t),delete c[p+s]})}),C.push(m),h=p;j>=h;h++)c[h]=m;return Promise.all(C).then(function(){return i.slice(e,s+1)})}.bind(this))},s.exports=n},{"./request":"/home/wre/dev/js/msa/src/request.js",extend:"/home/wre/dev/js/msa/node_modules/extend/index.js"}],"/home/wre/dev/js/msa/src/request.js":[function(e,s){s.exports=function(e,s){return s=s||{},new Promise(function(t,o){var r=new XMLHttpRequest;r.open(s.method||"GET",e,!0),Object.keys(s.headers||{}).forEach(function(e){r.setRequestHeader(e,s.headers[e])}),r.onload=function(){return r.status>=400?o(r):t(r)},r.onerror=function(e){return o(e)},r.send(s.data||void 0)})}},{}]},{},["./src/index.sjs"]);
//# sourceMappingURL=bcn-msaview.1.0.0.min.js.map